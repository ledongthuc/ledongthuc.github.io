<!doctype html><html lang=en-us><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta http-equiv=x-ua-compatible content="IE=edge"><title>Jump table (branch table)</title><meta name=description content="A space where I put my notes, researches and stuffs."><link rel=stylesheet type=text/css href="http://fonts.googleapis.com/css?family=Ubuntu:regular,bold&subset=Latin"><link rel=stylesheet href=/css/style.css?1659988800><meta property="og:title" content="Thuc notes - Jump table (branch table)"><meta property="og:description" content="The jump table is a method to transfer program control to another code block using a table of branch or jump instructions."><meta property="og:image" content="https://thuc.space/images/jump_table/jump_table-jump_table.png"><meta property="og:image:type" content="image/png"><meta property="og:type" content="website"></head><body><div class=header>Thuc notes &copy; 2022<div class=menu>| <a href=/>home</a>
| <a href=/series/>series</a>
| <a href=/tags/>tags</a>
| <a href=/about-me/>about me</a></div></div><h1>Jump Table (Branch Table)</h1><div class=main><div class=article>Part of series <a class=series href=/series/software-development>software development</a> |
<time>2022-06-08</time><div class=content><h1 id=jump-table>Jump table</h1><p>The jump table is a method to transfer program control to another code block using a table of branch or jump instructions.</p><p><img src=https://thuc.space/images/jump_table/jump_table-jump_table.png alt="jump table"></p><p>It&rsquo;s a table of code addresses, that can be indexed by selector value. We can use a selector to map to a code address and jump to the code block.</p><p>Approximate translation:</p><pre><code>target = JumpTable[selector];
goto target;
</code></pre><p>The jump table can be used by the compiler to optimize switch-case in many programming languages.
Each switch case is defined as its memory address in the table jump.</p><p><img src=https://thuc.space/images/jump_table/jump_table-switch-case.png alt="switch jump table"></p><p>The selector can be calculated by data (input of switch-case) and transformed into an offset that is used at the selector in the jump table. The transform can be multiplying or shifting.</p><pre><code>selector = start-address-of-jump-table + offset
offset = option-index * memory-size-one-address
option-index = transform(data)
</code></pre><p>If a static translate table is used, this multiplying can be performed manually or by the compiler, without any run time cost.</p><p>References:</p><ul><li><a href=https://courses.cs.washington.edu/courses/cse351/17sp/lectures/CSE351-L10-asm-IV_17sp-ink.pdf>https://courses.cs.washington.edu/courses/cse351/17sp/lectures/CSE351-L10-asm-IV_17sp-ink.pdf</a></li><li><a href=https://www.nesdev.org/wiki/Jump_table>https://www.nesdev.org/wiki/Jump_table</a></li><li><a href=http://www.cs.umd.edu/~waa/311-F09/jumptable.pdf>http://www.cs.umd.edu/~waa/311-F09/jumptable.pdf</a></li><li><a href=https://sites.google.com/site/arch1utep/jump-tables>https://sites.google.com/site/arch1utep/jump-tables</a></li><li><a href=https://en.wikipedia.org/wiki/Branch_table>https://en.wikipedia.org/wiki/Branch_table</a></li></ul></div><div class=tags>Tags: <a class=tag href=/tags/switch-optimize>switch optimize</a> | <a class=tag href=/tags/jump-table>jump table</a> | <a class=tag href=/tags/branch-table>branch table</a> |</div></div></div></body></html>